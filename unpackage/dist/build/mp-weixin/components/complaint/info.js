(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/complaint/info"],{"072a":function(t,n,e){"use strict";e.r(n);var o=e("876c"),i=e("c409");for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("3c6a");var c,a=e("f0c5"),l=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"41c7fe47",null,!1,o["a"],c);n["default"]=l.exports},2380:function(t,n,e){},"3c6a":function(t,n,e){"use strict";var o=e("2380"),i=e.n(o);i.a},"64b5":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("4795"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,n,e,o,i,s,c){try{var a=t[s](c),l=a.value}catch(u){return void e(u)}a.done?n(l):Promise.resolve(l).then(o,i)}function c(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var c=t.apply(n,e);function a(t){s(c,o,i,a,l,"next",t)}function l(t){s(c,o,i,a,l,"throw",t)}a(void 0)}))}}var a={data:function(){return{id:null,details:{},content:"",imgurl:"",imgList:[],photos:[],photos1:[]}},onLoad:function(t){this.id=t.id,this.imgurl=this.$imgurl,this.getMsgDetails()},onShow:function(){},methods:{getMsgDetails:function(){var t=this;this.$http.post("sMessage/getComplaintDetail",{id:this.id}).then((function(n){if(100==n.code){t.details=n.info,t.details.newsVoReply?t.content=t.details.newsVoReply.content:t.content="";var e=t.details.photos;t.photos=[],e.length>0&&e.forEach((function(n,e){t.photos.push(t.imgurl+"file/downloadOss/"+n)}));var o=t.details.newsVoReply.photos;t.photos1=[],o.length>0&&o.forEach((function(n,e){t.photos1.push(t.imgurl+"file/downloadOss/"+n)})),t.imgList=o}}))},reply:function(){var n=this,e="",o={};1==this.details.state||0==this.details.state?e="sMessage/addReply":(e="sMessage/updateReply",o.id=this.details.newsVoReply.id),o.replyId=this.details.id,o.content=this.content,o.photos=this.imgList,o.content?this.$http.post(e,o).then((function(e){100==e.code?(t.showToast({icon:"success",title:"回复成功"}),n.getMsgDetails(),t.navigateBack({})):t.showToast({icon:"none",title:e.msg})})):t.showToast({icon:"none",title:"请输入回复内容！"})},uploadImg:function(){var n=this,e=1;console.log("上传图片"),console.log(this.imgList),n.imgList.length<3?t.chooseImage({fail:function(){t.hideLoading(),t.showToast({icon:"none",title:"上传失败"})},success:function(){var i=c(o.default.mark((function i(s){var a,l;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:console.log("成功"),console.log(s),a=[],a=s.tempFilePaths,t.showLoading({title:"正在上传中"}),"",l=t.getStorageSync("userinfo"),l&&(l=JSON.parse(l),l.token),a.forEach(function(){var i=c(o.default.mark((function i(s,c){var l;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:console.log("上传"),console.log(s),l=s,console.log(JSON.stringify(l)),t.uploadFile({url:n.$imgurl+"file/uploadOSS",header:{"Content-type":"multipart/form-data"},filePath:l,name:"file",success:function(o){console.log("已上传数量"+n.imgList.length),console.log(o);var i=o.data;i=JSON.parse(i),100==i.code?n.imgList.length<3?(console.log("上传成功"+c),console.log(i.info),n.imgList.push(i.info),c==a.length-1&&t.hideLoading()):1==e&&(t.showToast({title:"图片上传数量已到",icon:"none",success:function(){setTimeout((function(){t.hideToast()}),2e3)}}),e++):t.showToast({icon:"none",title:"上传失败"})},fail:function(n){console.log("上传失败"+c),console.log(n),t.showToast({title:"上传失败",icon:"none",success:function(){setTimeout((function(){t.hideToast()}),2e3)}})}});case 5:case"end":return o.stop()}}),i)})));return function(t,n){return i.apply(this,arguments)}}());case 9:case"end":return i.stop()}}),i)})));function s(t){return i.apply(this,arguments)}return s}()}):t.showToast({title:"图片最多上传3张",icon:"none",success:function(){setTimeout((function(){t.hideToast()}),2e3)}})},deleteImg:function(t){this.imgList.splice(t,1)},lookImg:function(n,e){t.previewImage({current:n,urls:e})}}};n.default=a}).call(this,e("543d")["default"])},"876c":function(t,n,e){"use strict";var o,i=function(){var t=this,n=t.$createElement;t._self._c},s=[];e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return o}))},"8d1c":function(t,n,e){"use strict";(function(t){e("8d3f");o(e("66fd"));var n=o(e("072a"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},c409:function(t,n,e){"use strict";e.r(n);var o=e("64b5"),i=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);n["default"]=i.a}},[["8d1c","common/runtime","common/vendor"]]]);